import{r,j as a}from"./index-DfBREQpt.js";import{u as x}from"./useDrag-DrSVD6ae.js";const h=e=>(o,s,u,i)=>{if(!i)return s;const f=e?.x||0,c=e?.y||0,g=o.getBoundingClientRect(),t=Object.assign({},s);return f+s.x-g.width/2<0&&(t.x=-f),c+s.y-g.height/2<0&&(t.y=-c),f+s.x-g.width/2>i.offsetWidth&&(t.x=i.offsetWidth-f),c+s.y-g.height/2>i.offsetHeight&&(t.y=i.offsetHeight-c),t},C=r.forwardRef((e,o)=>{const s=r.useRef(null),u=r.useRef(null),i=r.useRef(null),f=r.useRef(null),c=r.useRef(null),g=r.useCallback(m=>{c.current=m,typeof o=="function"?o(m):o&&(o.current=m)},[o]),{transform:t,isDragging:R}=x({dragElem:s,boundElem:e.parentRef,checkBounds:h(e.parentTransform),allowedDirections:["y"]}),{transform:l,isDragging:y}=x({dragElem:u,boundElem:e.parentRef,checkBounds:h(e.parentTransform),allowedDirections:["y"]}),{transform:n,isDragging:z}=x({dragElem:i,boundElem:e.parentRef,checkBounds:h(e.parentTransform),allowedDirections:["x"]}),{transform:d,isDragging:D}=x({dragElem:f,boundElem:e.parentRef,checkBounds:h(e.parentTransform),allowedDirections:["x"]}),{updateDims:$,updateIsResizing:T}=e,v=r.useRef(R||z||D||y);r.useEffect(()=>{const m=R||z||D||y;T&&T(m,v.current),v.current=m},[R,z,D,y,T]);const B=t?`translateX(${t.x}px)`:"",S=l?`translateX(${l.x}px)`:`${e?.resizemeStyles?.height?`translateY(${e?.resizemeStyles?.height}px)`:""}`,N=n?`translateY(${n.y}px)`:"",E=d?`translateY(${d.y}px)`:`${e?.resizemeStyles?.width?`translateX(${e?.resizemeStyles?.width}px)`:""}`,j=(l?l.y:0)-(t?t.y:0),w=(d?d.x:0)-(n?n.x:0);r.useLayoutEffect(()=>{$&&$({width:w,height:j,offsetX:n?n.x:0,offsetY:t?t.y:0})},[w,j,n?.x,t?.y,$]);const X=e.parentTransform?`translateX(${e.parentTransform.x}px) translateY(${e.parentTransform.y}px)`:"",Y=`translateY(${t?t.y:0}px) translateX(${n?n.x:0}px)`,b=`${X} ${Y}`.trim();return a.jsxs("div",{className:"resizeme",ref:g,style:{...e.resizemeStyles||{},height:j,width:w,transform:b},children:[e.children,a.jsx("div",{className:"resizedragme-container resizedragme-top-container",children:a.jsx("div",{className:"resizedragme resizedragme-top",ref:s,style:{transform:B}})}),a.jsx("div",{className:"resizedragme-container resizedragme-bottom-container",children:a.jsx("div",{className:"resizedragme resizedragme-bottom",ref:u,style:{transform:S}})}),a.jsx("div",{className:"resizedragme-container resizedragme-left-container",children:a.jsx("div",{className:"resizedragme resizedragme-left",ref:i,style:{transform:N}})}),a.jsx("div",{className:"resizedragme-container resizedragme-right-container",children:a.jsx("div",{className:"resizedragme resizedragme-right",ref:f,style:{transform:E}})})]})});export{C as R};
